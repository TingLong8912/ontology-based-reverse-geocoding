openapi: 3.0.3
info:
  title: LocaDescriber Reverse Geocoding API
  version: 1.0.0
  description: Spatial reasoning API for semantic location descriptions

servers:
  - url: https://geospatialdescription.sgis.tw/
  # - url: http://localhost:8000/

paths:
  /api/get_locd:
    post:
      summary: æ ¹æ“šå¹¾ä½•èˆ‡èªæ„ä¸Šä¸‹æ–‡å–å¾—ä½ç½®æè¿°
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                geojson:
                  type: object
                  description: GeoJSON FeatureCollection
                context:
                  type: string
                  description: èªæ„æ¨ç†ä¸Šä¸‹æ–‡
                  enum: [Traffic, EarthquakeEW, ReservoirDis, Thunderstorm, Tsunami]
                w_one:
                  type: number
                  description: ç©ºé–“æ¨ç†æ¬Šé‡
                  default: 0.5
                w_two:
                  type: number
                  description: èªæ„æ¨ç†æ¬Šé‡
                  default: 0.5
            example:
              geojson:
                type: FeatureCollection
                features:
                  - type: Feature
                    geometry:
                      type: Point
                      coordinates: [121.64036788930203, 25.071748917423093] 
              context: Traffic
      responses:
        '200':
          description: æˆåŠŸå›å‚³æ¨ç†çµæœ
          content:
            application/json:
              example:
                data: {}
        '400':
          description: è«‹æ±‚æ ¼å¼éŒ¯èª¤

  /api/stream_locd:
    post:
      summary: ä»¥ SSE å½¢å¼ä¸²æµå›å‚³æ¨ç†éšæ®µçµæœ
      description: |
        âš ï¸ æ­¤ API ç‚º Server-Sent Eventsï¼ˆSSEï¼‰ä¸²æµä»‹é¢ã€‚
        Swagger UI ç„¡æ³•æ­£ç¢ºå±•ç¤ºä¸²æµçµæœï¼Œè«‹ä½¿ç”¨ curl æˆ–è‡ªè£½å‰ç«¯æ¸¬è©¦ã€‚

        ğŸ‘‰ ç¯„ä¾‹ curl æŒ‡ä»¤ï¼š

            curl -N -H "Content-Type: application/json" -X POST http://localhost:8000/api/stream_locd \
              -d '{
                "geojson": {
                  "type": "FeatureCollection",
                  "features": [
                    {
                      "type": "Feature",
                      "geometry": {
                        "type": "Point",
                        "coordinates": [121.5, 25.0]
                      }
                    }
                  ]
                },
                "context": "Traffic",
                "w_one": 0.6,
                "w_two": 0.4
              }'
      deprecated: true
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                geojson:
                  type: object
                  description: GeoJSON FeatureCollection
                context:
                  type: string
                  description: èªæ„æ¨ç†ä¸Šä¸‹æ–‡
                w_one:
                  type: number
                  description: ç©ºé–“æ¨ç†æ¬Šé‡
                  default: 0.6
                w_two:
                  type: number
                  description: èªæ„æ¨ç†æ¬Šé‡
                  default: 0.4
            example:
              geojson:
                type: FeatureCollection
                features:
                  - type: Feature
                    geometry:
                      type: Point
                      coordinates: [121.5, 25.0]
              context: Traffic
              w_one: 0.6
              w_two: 0.4
      responses:
        '200':
          description: æˆåŠŸä¸²æµæ¨ç†çµæœ
          content:
            text/event-stream:
              schema:
                type: string
        '400':
          description: è«‹æ±‚æ ¼å¼éŒ¯èª¤